{
    "openapi": "3.1.0",
    "info": {
        "title": "Tax API Specification",
        "description": "Tax API Specification. All endpoints are accessible by roles: admin, finance",
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:8000"
        }
    ],
    "paths": {
        "/api/taxes": {
            "get": {
                "summary": "Get all taxes",
                "description": "Retrieve a paginated list of all available taxes in the system.",
                "tags": ["Taxes"],
                "parameters": [
                    {
                        "name": "page",
                        "in": "query",
                        "description": "Page number for pagination",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 1
                        }
                    },
                    {
                        "name": "perPage",
                        "in": "query",
                        "description": "Number of items per page",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "default": 10
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved tax list",
                        "content": {
                            "application/json": {
                                "example": {
                                    "data": [
                                        {
                                            "id": 1,
                                            "name": "PPN",
                                            "rate": 11
                                        },
                                        {
                                            "id": 2,
                                            "name": "PPh",
                                            "rate": 2.5
                                        }
                                    ],
                                    "meta": {
                                        "current_page": 1,
                                        "per_page": 10,
                                        "total": 2,
                                        "last_page": 1
                                    },
                                    "message": "Taxes retrieved successfully",
                                    "statusCode": 200
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "summary": "Create a new tax",
                "description": "Create a new tax record to be used in product pricing or calculations.",
                "tags": ["Taxes"],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "PPN"
                                    },
                                    "rate": {
                                        "type": "number",
                                        "example": 11.0
                                    }
                                },
                                "required": ["name", "rate"]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Successfully created a new tax",
                        "content": {
                            "application/json": {
                                "example": {
                                    "data": {
                                        "id": 1,
                                        "name": "PPN",
                                        "rate": 11.0
                                    },
                                    "message": "Tax created successfully",
                                    "statusCode": 201
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/taxes/{id}": {
            "get": {
                "summary": "Get tax detail",
                "description": "Retrieve detailed information of a specific tax by its ID.",
                "tags": ["Taxes"],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        },
                        "description": "The ID of the tax to retrieve"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successfully retrieved tax detail",
                        "content": {
                            "application/json": {
                                "example": {
                                    "data": {
                                        "id": 1,
                                        "name": "PPN",
                                        "rate": 11.0
                                    },
                                    "message": "Tax detail retrieved successfully",
                                    "statusCode": 200
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "patch": {
                "summary": "Update a tax",
                "description": "Update the information of an existing tax such as name, rate, or description.",
                "tags": ["Taxes"],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        },
                        "description": "The ID of the tax to update"
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "PPN"
                                    },
                                    "rate": {
                                        "type": "number",
                                        "format": "float",
                                        "example": 10.0
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successfully updated tax",
                        "content": {
                            "application/json": {
                                "example": {
                                    "data": {
                                        "id": 1,
                                        "name": "PPN",
                                        "rate": 10.0
                                    },
                                    "message": "Tax updated successfully",
                                    "statusCode": 200
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "summary": "Soft delete a tax (can’t delete if there is a relation)",
                "description": "Soft delete a tax entry. The tax can still be restored unless force deleted.",
                "tags": ["Taxes"],
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 1
                        },
                        "description": "The ID of the tax to soft delete"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Unit deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Tax deleted successfully"
                                                }
                                            }
                                        },
                                        "statusCode": {
                                            "type": "integer",
                                            "example": 200
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/taxes/{id}/restore": {
            "patch": {
                "summary": "Restore a deleted tax",
                "description": "Restore a soft-deleted tax entry so it can be used again in the system.",
                "tags": ["Taxes"],
                "responses": {
                    "200": {
                        "description": "Unit restored successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Electronics"
                                                }
                                            }
                                        },
                                        "message": {
                                            "type": "string",
                                            "example": "Category restored successfully"
                                        },
                                        "statusCode": {
                                            "type": "integer",
                                            "example": 200
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/taxes/{id}/force": {
            "delete": {
                "summary": "Force delete a tax",
                "description": "Permanently delete a tax from the system. Can only be done if it is not related to any products.",
                "tags": ["Taxes"],
                "responses": {
                    "200": {
                        "description": "Unit permanently deleted",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unit permanently deleted"
                                                }
                                            }
                                        },
                                        "statusCode": {
                                            "type": "integer",
                                            "example": 200
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "errors": {
                                            "type": "object",
                                            "properties": {
                                                "message": {
                                                    "type": "string",
                                                    "example": "Unauthorized"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
